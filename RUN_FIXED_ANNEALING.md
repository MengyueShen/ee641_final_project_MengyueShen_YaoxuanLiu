# è¿è¡Œ Fixed Annealing å®Œæ•´æµç¨‹æŒ‡å—

## âœ… æ­¥éª¤1ï¼šæ•°æ®å‡†å¤‡ï¼ˆå·²å®Œæˆï¼‰

æ•°æ®å·²è§£å‹åˆ°ï¼š`./data/CUB_200_2011/`

å¿…è¦æ–‡ä»¶å·²éªŒè¯ï¼š
- âœ… `images.txt` - å›¾åƒåˆ—è¡¨
- âœ… `train_test_split.txt` - è®­ç»ƒ/æµ‹è¯•åˆ’åˆ†
- âœ… `images/` - å›¾åƒæ–‡ä»¶å¤¹
- âš ï¸ `text/` - æ–‡æœ¬æè¿°ç›®å½•ï¼ˆå¯é€‰ï¼Œä»£ç ä¼šä½¿ç”¨ç©ºæ–‡æœ¬ï¼‰

---

## ğŸ“¦ æ­¥éª¤2ï¼šå®‰è£…ä¾èµ–

ç¡®ä¿å·²å®‰è£…æ‰€æœ‰å¿…éœ€çš„PythonåŒ…ï¼š

```bash
cd "/Users/smy/Documents/learning/studying/learning/641deeplearning system/641_final_project"
pip install -r requirements.txt
```

**ä¸»è¦ä¾èµ–**ï¼š
- torch, torchvision
- numpy, matplotlib, scipy
- pillow, tqdm
- nltkï¼ˆæ–‡æœ¬å¤„ç†ï¼‰

---

## ğŸš€ æ­¥éª¤3ï¼šè¿è¡Œè®­ç»ƒè„šæœ¬

è¿è¡Œ Fixed Annealing çš„å®Œæ•´è®­ç»ƒæµç¨‹ï¼š

```bash
cd "/Users/smy/Documents/learning/studying/learning/641deeplearning system/641_final_project"
python src/experiments/train_full_pipeline.py
```

**è®­ç»ƒé…ç½®**ï¼ˆåœ¨è„šæœ¬ä¸­ï¼‰ï¼š
- Batch size: 16
- Epochs: 50
- æ¯5ä¸ªepochè¯„ä¼°ä¸€æ¬¡
- æ¯10ä¸ªepochä¿å­˜æ£€æŸ¥ç‚¹

**è®­ç»ƒè¿‡ç¨‹ä¼šæ˜¾ç¤º**ï¼š
- æ¯ä¸ªepochçš„æŸå¤±ï¼ˆGenerator Loss, Discriminator Lossï¼‰
- Scheduleå‚æ•°å˜åŒ–ï¼ˆnoise_var, augmentation_strength, regularization_weightï¼‰
- éªŒè¯é›†è¯„ä¼°æŒ‡æ ‡ï¼ˆFID, IS, CLIP Scoreï¼‰

---

## ğŸ“Š æ­¥éª¤4ï¼šæŸ¥çœ‹ç»“æœ

è®­ç»ƒå®Œæˆåï¼Œæ‰€æœ‰ç»“æœä¿å­˜åœ¨ `results/` ç›®å½•ï¼š

### å¯è§†åŒ–å›¾åƒï¼ˆ`results/figures/`ï¼‰
1. **`schedule_params_fixed_annealing.png`** â­æ ¸å¿ƒ - Scheduleå‚æ•°æ›²çº¿
2. **`loss_curves_fixed_annealing.png`** - Lossæ›²çº¿
3. **`metrics_vs_steps_fixed_annealing.png`** - FID/IS/CLIP vs Steps
4. **`grad_norms_fixed_annealing.png`** - æ¢¯åº¦èŒƒæ•°
5. **`samples_grid_fixed_annealing.png`** - ç”Ÿæˆæ ·æœ¬ç½‘æ ¼ï¼ˆå¦‚æœæœ‰ï¼‰

### æ¨¡å‹æ£€æŸ¥ç‚¹ï¼ˆ`results/checkpoints/`ï¼‰
- `best_model.pth` - éªŒè¯é›†ä¸Šæœ€ä½³æ¨¡å‹
- `checkpoint_epoch_*.pth` - å®šæœŸä¿å­˜çš„æ£€æŸ¥ç‚¹

### æ•°æ®æ–‡ä»¶
- `results/training_data.json` - è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ‰€æœ‰æ•°æ®
- `results/final_results.json` - æœ€ç»ˆæµ‹è¯•é›†è¯„ä¼°ç»“æœ

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è®­ç»ƒæ—¶é—´**ï¼š50ä¸ªepochå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼ˆå–å†³äºGPU/CPUï¼‰
   - GPU: çº¦2-4å°æ—¶
   - CPU: å¯èƒ½éœ€è¦æ•°å°æ—¶ç”šè‡³æ›´ä¹…

2. **å†…å­˜è¦æ±‚**ï¼š
   - å»ºè®®è‡³å°‘8GB RAM
   - å¦‚æœå†…å­˜ä¸è¶³ï¼Œå¯ä»¥å‡å°batch_sizeï¼ˆåœ¨è„šæœ¬ä¸­ä¿®æ”¹ï¼‰

3. **æ–‡æœ¬æè¿°**ï¼š
   - å½“å‰æ•°æ®é›†æ²¡æœ‰textç›®å½•ï¼Œä»£ç ä¼šä½¿ç”¨ç©ºæ–‡æœ¬
   - è¿™ä¸ä¼šå½±å“è®­ç»ƒï¼Œä½†ç”Ÿæˆçš„å›¾åƒå¯èƒ½ä¸ä¼šä¸æ–‡æœ¬åŒ¹é…
   - å¦‚æœéœ€è¦æ–‡æœ¬æè¿°ï¼Œéœ€è¦ä¸‹è½½CUB-200çš„æ–‡æœ¬æè¿°æ–‡ä»¶

4. **è®¾å¤‡é€‰æ‹©**ï¼š
   - è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹CUDAï¼Œå¦‚æœæœ‰GPUä¼šè‡ªåŠ¨ä½¿ç”¨
   - å¦‚æœæ²¡æœ‰GPUï¼Œä¼šåœ¨CPUä¸Šè¿è¡Œï¼ˆè¾ƒæ…¢ï¼‰

---

## ğŸ” éªŒè¯è®­ç»ƒæ˜¯å¦æ­£å¸¸è¿è¡Œ

è®­ç»ƒå¼€å§‹åï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

```
======================================================================
å®Œæ•´è®­ç»ƒæµç¨‹ - Fixed Annealing - ä¸­æœŸæŠ¥å‘Š
======================================================================
è®¾å¤‡: cuda  # æˆ– cpu
Batch size: 16
Epochs: 50

[1/5] åŠ è½½æ•°æ®é›†...
âœ… æ•°æ®é›†åŠ è½½æˆåŠŸ
   è®­ç»ƒé›†: XXXX å¼ 
   éªŒè¯é›†: XXXX å¼ 
   æµ‹è¯•é›†: XXXX å¼ 
   è¯æ±‡è¡¨å¤§å°: XXXX

[2/5] åˆ›å»ºæ¨¡å‹...
âœ… æ¨¡å‹åˆ›å»ºæˆåŠŸ

[3/5] åˆ›å»ºè°ƒåº¦å™¨...
âœ… Fixed Annealingè°ƒåº¦å™¨åˆ›å»ºæˆåŠŸ
   åˆå§‹å‚æ•°: {...}

[4/5] åˆ›å»ºå¯è§†åŒ–å™¨...
âœ… å¯è§†åŒ–å™¨åˆ›å»ºæˆåŠŸ

[5/5] å¼€å§‹è®­ç»ƒ...
======================================================================
Epoch 1/50: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| XXX/XXX [XX:XX<00:00, X.XXit/s]
...
```

---

## ğŸ› å¸¸è§é—®é¢˜

**Q: æ•°æ®é›†åŠ è½½å¤±è´¥ï¼Ÿ**
- æ£€æŸ¥ `./data/CUB_200_2011/` ç›®å½•æ˜¯å¦å­˜åœ¨
- ç¡®è®¤ `images.txt` å’Œ `train_test_split.txt` æ–‡ä»¶å­˜åœ¨

**Q: CUDA out of memoryï¼Ÿ**
- å‡å°batch_sizeï¼ˆåœ¨è„šæœ¬ä¸­ä¿®æ”¹ `batch_size = 16` ä¸ºæ›´å°çš„å€¼ï¼Œå¦‚8æˆ–4ï¼‰

**Q: è®­ç»ƒå¤ªæ…¢ï¼Ÿ**
- å¦‚æœæœ‰GPUä½†æ˜¾ç¤ºä½¿ç”¨CPUï¼Œæ£€æŸ¥CUDAæ˜¯å¦æ­£ç¡®å®‰è£…
- å¯ä»¥å‡å°num_epochsè¿›è¡Œå¿«é€Ÿæµ‹è¯•

**Q: æ‰¾ä¸åˆ°æ¨¡å—ï¼Ÿ**
- è¿è¡Œ `pip install -r requirements.txt` å®‰è£…æ‰€æœ‰ä¾èµ–

---

**æœ€åæ›´æ–°**: 2024å¹´12æœˆ

